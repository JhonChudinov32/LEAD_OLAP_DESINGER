<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:LEAD_OLAP_DESINGER.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="500"
        xmlns:tree="clr-namespace:Avalonia.Controls.TreeDataGrid;assembly=Avalonia.Controls.TreeDataGrid"
        xmlns:l="clr-namespace:LEAD_OLAP_DESINGER.Helpers;assembly=LEAD_OLAP_DESINGER"
        xmlns:local="clr-namespace:LEAD_OLAP_DESINGER.Models;assembly=LEAD_OLAP_DESINGER"
        x:Class="LEAD_OLAP_DESINGER.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/logistix.ico"
        Title="{Binding title}"
        Width="800" Height="500"
        SizeToContent="WidthAndHeight"
        WindowState="Maximized"
        KeyDown ="OnKeyDown">

    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainWindowViewModel/>
    </Design.DataContext>
  <Window.Resources>
    <l:ColumnWidthConverter x:Key="ColumnWidthConverter"/>
    <l:ColumnWidthConverter2 x:Key="ColumnWidthConverter2"/>

    <ColumnDefinition x:Key="Column1" Width="{Binding Column1Width}"/>
    <ColumnDefinition x:Key="Column2" Width="{Binding Column2Width}"/>
    <ColumnDefinition x:Key="Column3" Width="{Binding Column3Width}"/>
  </Window.Resources>


  <DockPanel>
    <!-- Ð’ÐµÑ€Ñ…Ð½ÐµÐµ Ð¼ÐµÐ½ÑŽ -->
    <Menu DockPanel.Dock="Top" Background="Transparent" FontSize="12" FontFamily="Consolas">
      <!--
      <MenuItem Header="Ð¤Ð°Ð¹Ð»" >
        <MenuItem Name="ConnectBD" Header="ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ  Ctrl+Ð¡" Click="Connect_Click"/>
        <MenuItem Name="ExitMenu" Header="Ð’Ñ‹Ñ…Ð¾Ð´ Ctrl+Q" Click="Exit_Click"/>
      </MenuItem>
      -->
      <MenuItem>
        <MenuItem.Header>
          <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð´Ð»Ñ Ð¿ÑƒÐ½ÐºÑ‚Ð° Ð¼ÐµÐ½ÑŽ -->
            <Image Source="avares://LEAD_OLAP_DESINGER/Assets/gear.png" Width="14" Height="14" Margin="0,0,5,0"/>
            <TextBlock Text="ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹" VerticalAlignment="Center"/>
          </StackPanel>
        </MenuItem.Header>
        <MenuItem Name="ConnectMenu" Header="ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ctrl+P" Click="Param_Click">
          <MenuItem.Icon>
            <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð´Ð»Ñ Ð¿Ð¾Ð´Ð¼ÐµÐ½ÑŽ -->
            <Image Source="avares://LEAD_OLAP_DESINGER/Assets/networking.png" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem IsVisible="False">
          <MenuItem.Header>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
              <ToggleSwitch Click="OnToggleThemeClicked" VerticalAlignment="Center"  />
            </StackPanel>
          </MenuItem.Header>
        </MenuItem>
      </MenuItem>
      
    </Menu>

    <!-- Ð’ÐµÑ€Ñ…Ð½Ð¸Ð¹ SplitView -->
    <Grid Name="gridMain" DockPanel.Dock="Top">
      <Grid.ColumnDefinitions>
        <!-- Ð›ÐµÐ²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÑˆÐ¸Ñ€Ð¸Ð½Ð° -->
        <ColumnDefinition Width="255" MinWidth="255"/>
        <!-- Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ -->
        <ColumnDefinition Width="Auto"/>
        <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¾ÑÑ‚Ð°Ð²ÑˆÐµÐµÑÑ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾ -->
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
       
      <!-- Ð›ÐµÐ²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: Ð¢Ð°Ð±Ñ‹ -->
      <Grid Name="gridM" Grid.Column="0" SizeChanged="Grid_SizeChanged">
        <!-- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ ÑÑ‚Ñ€Ð¾Ðº -->
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <!-- Ð”Ð»Ñ Label Ð¸ ComboBox -->
          <RowDefinition Height="*" />
          <!-- Ð”Ð»Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ð³Ð¾ -->
        </Grid.RowDefinitions>
        <Grid Margin="5,0,0,0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="90"/>
            <!-- Ð”Ð»Ñ Ñ‚ÐµÐºÑÑ‚Ð° "Ð¡Ð»Ð¾Ð¹:" -->
            <ColumnDefinition Width="*"/>
            <!-- Ð”Ð»Ñ ComboBox -->
          </Grid.ColumnDefinitions>
          
          <TextBlock Text="ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ:"
                     VerticalAlignment="Center"
                     Margin="5,5,5,0"
                     FontSize="12"
                     FontFamily="Consolas"
                     Grid.Column="0"/>
          <ComboBox x:Name="NameBD"
                    VerticalContentAlignment="Center" Margin="5,5,10,0"
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch" Grid.Column="1" FontSize="12" FontFamily="Consolas"
                    SelectionChanged="ConnectComboBox_SelectionChanged"/>
        </Grid>
     
        <Grid Margin="5,0,0,0" Grid.Row="1">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="90"/>
              <!-- Ð”Ð»Ñ Ñ‚ÐµÐºÑÑ‚Ð° "Ð¡Ð»Ð¾Ð¹:" -->
              <ColumnDefinition Width="*"/>
              <!-- Ð”Ð»Ñ ComboBox -->
            </Grid.ColumnDefinitions>

            <TextBlock Text="Ð¡Ð»Ð¾Ð¹:"
                       VerticalAlignment="Center"
                       Margin="5,5,5,0"
                       FontSize="12"
                       FontFamily="Consolas"
                       Grid.Column="0" HorizontalAlignment="Left"/>
            <ComboBox x:Name="LayerComboBox"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Center"
                      FontFamily="Consolas"
                      FontSize="12"
                      Grid.Column="1"
                      Margin="5,5,10,0"/>
          </Grid>
        
        
        <TabControl Name="TabControlName" Grid.Column="0" Grid.Row="2">
          <!-- Tab: Ð”Ð°Ð½Ð½Ñ‹Ðµ -->
          <TabItem Header="Ð”Ð°Ð½Ð½Ñ‹Ðµ" FontSize="14" FontFamily="Consolas">
            <DockPanel>
              <Border BorderThickness="1" BorderBrush="LightGray" Margin="0,5">
              <StackPanel Orientation="Vertical">
               
                <Border BorderThickness="0" BorderBrush="LightGray" Margin="2,2,2,2" Padding="2,0,0,0">
                <StackPanel Orientation="Horizontal" Height="40">

                  <Button Name="button3"  Width="40" Click="OpenButton_Click"  HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                    <Image Source="avares://LEAD_OLAP_DESINGER/Assets/add.png" Width="15" Height="17" />
                  
                  </Button>
                  <!--<Button Name="button4" Content="ðŸ—‘" Width="40" Click="DeleteButton_Click" Foreground="Red"/>-->
                  <Button Name="button4" Width="40" Click="DeleteButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                    <Image Source="avares://LEAD_OLAP_DESINGER/Assets/deletT.png" Width="15" Height="17" />
                  </Button>
                  <!--<Button Name="button2" Content="ðŸš«" Width="40" Click="DisableButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2"/>-->
                  <Button Name="button2" Width="40" Click="DisableButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                    <Image Source="avares://LEAD_OLAP_DESINGER/Assets/delete.png" Width="15" Height="17" />
                   </Button>
                  <!--<Button Name="button1" Content="âœ" Width="40" Click="EditButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2"/>-->
                  <Button Name="button1" Width="40" Click="EditButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                    <Image Source="avares://LEAD_OLAP_DESINGER/Assets/edit.png" Width="15" Height="17" />
                  </Button>
                  <!--<Button Name="button5" Content="â„¹" Width="40" Click="InfoButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2"/>-->
                  <Button Name="button5" Width="40" Click="InfoButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                    <Image Source="avares://LEAD_OLAP_DESINGER/Assets/update.png" Width="15" Height="17" />
                  </Button>
                </StackPanel>
                </Border>
                <ListBox x:Name="DataListBox" Margin="0,5,0,5"
                         Padding="0"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch" FontSize="12" FontFamily="Consolas">
                  <ListBox.ItemTemplate>
                    <DataTemplate>
                      <ListBoxItem Padding="0"
                                   HorizontalAlignment="Stretch"
                                   VerticalAlignment="Stretch">
                        <!-- Add item content here, you can bind it to your data -->
                        <TextBlock Text="{Binding}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                      </ListBoxItem>
                    </DataTemplate>
                  </ListBox.ItemTemplate>
                </ListBox>
              </StackPanel>
              </Border>
            </DockPanel>
          </TabItem>

          <!-- Tab: ÐžÐ±ÑŠÐµÐºÑ‚Ñ‹ -->
          <TabItem Header="ÐžÐ±ÑŠÐµÐºÑ‚Ñ‹" FontSize="14" FontFamily="Consolas">
            <DockPanel>
              <Border BorderThickness="1" BorderBrush="LightGray" Margin="0,5">
                <Grid>
                  <!-- ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ ÑÑ‚Ñ€Ð¾Ðº -->
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <!-- Ð”Ð»Ñ Ð¿Ð°Ð½ÐµÐ»Ð¸ ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
                    <RowDefinition Height="*" />
                    <!-- Ð”Ð»Ñ DataGrid -->
                  </Grid.RowDefinitions>

                  <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
                  <Border BorderThickness="0" BorderBrush="LightGray" Margin="2,2,2,2" Padding="2,0,0,0">
                    <StackPanel Orientation="Horizontal" Height="40">
                      <!--<Button Name="button9" Content="ðŸ—‘" Width="40" Click="DeleteObjectButton_Click" Margin="5,0,0,0" />-->
                      <Button Name="button9" Width="40" Click="DeleteObjectButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                        <Image Source="avares://LEAD_OLAP_DESINGER/Assets/deletT.png" Width="15" Height="17" />
                      </Button>
                      <!--<Button Name="button6" Content="âœ" Width="40" Click="EditObjectButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2"/>-->
                      <Button Name="button6" Content="âœ" Width="40" Click="EditObjectButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                      <Image Source="avares://LEAD_OLAP_DESINGER/Assets/edit.png" Width="15" Height="17" />
                        </Button>
                      <!--<Button Name="button7" Content="ðŸ¡¸" Width="40" Click="BackButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2"/>-->
                      <Button Name="button7"  Width="40" Click="BackButton_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="1,2,1,2">
                        <Image Source="avares://LEAD_OLAP_DESINGER/Assets/edit2.png" Width="15" Height="17" />
                      </Button>
                    </StackPanel>
                  </Border>
                  
                  <StackPanel Orientation="Vertical" Grid.Row="1">

                 
                  <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² -->
                  <DataGrid IsVisible="False" x:Name="gridObjects"
                            Grid.Row="1"
                            ItemsSource="{Binding ObjectList}"
                            AutoGenerateColumns="False"
                            VerticalAlignment="Stretch"
                            HorizontalAlignment="Stretch"
                            Margin="1"
                            RowDetailsVisibilityMode="VisibleWhenSelected"
                            SelectionChanged="DataGrid_SelectionChanged">
                   
                    <DataGrid.Columns>
                      <DataGridTextColumn Header="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°" Binding="{Binding ObjectName}" />
                      <DataGridTextColumn Header="Ð¢Ð¸Ð¿ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°" Binding="{Binding ObjectType}" />
                      <DataGridTextColumn Header="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ°" Binding="{Binding ClassName}" />
                    </DataGrid.Columns>
                  </DataGrid>
                    <Grid>
                      <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                       
                        <RowDefinition Height="*" /> 
                       
                      </Grid.RowDefinitions>

                      <!--<Grid  Name="HeaderGrid" Grid.Row="0" Margin="5,5,5,0" SizeChanged="HeaderGrid_SizeChanged">
                        <Grid.ColumnDefinitions>
                          <StaticResource ResourceKey="Column1"/>
                          <StaticResource ResourceKey="Column2"/>
                          <StaticResource ResourceKey="Column3"/>
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0"  Background="{DynamicResource PrimaryColor}" BorderThickness="1" Padding="5" HorizontalAlignment="Stretch">
                          <TextBlock Text="OLAP Ð¾Ð±ÑŠÐµÐºÑ‚" FontSize="12" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0"/>
                        </Border>
                        <Border Grid.Column="1"  Background="{DynamicResource PrimaryColor}" BorderThickness="1" Padding="5" HorizontalAlignment="Stretch">
                          <TextBlock Text="ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ" FontSize="12" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0"/>
                        </Border>
                        <Border Grid.Column="2"  Background="{DynamicResource PrimaryColor}" BorderThickness="1" Padding="5" HorizontalAlignment="Stretch">
                          <TextBlock Text="Ð¢Ð¸Ð¿" FontSize="12" HorizontalAlignment="Left" VerticalAlignment="Center"  Margin="20,0,0,0"/>
                        </Border>
                      </Grid>-->
                      
                      <TreeView Name="treeObj" ItemsSource="{Binding League}" SelectionChanged="DataGrid_SelectionChanged"
                       Grid.Row="1" Margin="5,0,5,5" Height="{Binding Bounds.Height, RelativeSource={RelativeSource AncestorType=StackPanel}}">
                        <TreeView.DataTemplates>
                          <!-- ÐšÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ ÑƒÐ·ÐµÐ» Ñ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ°Ð¼Ð¸ (Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ÑÑ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð² TreeView) -->
                          <TreeDataTemplate DataType="{x:Type local:HeaderNode}" ItemsSource="{Binding Children}">
                            <Grid Focusable="False">
                              <Grid.ColumnDefinitions>
                                <StaticResource ResourceKey="Column1"/>
                                <StaticResource ResourceKey="Column2"/>
                                <StaticResource ResourceKey="Column3"/>
                              </Grid.ColumnDefinitions>

                              <Border Grid.Column="0" BorderThickness="1" Padding="0" Background="{DynamicResource PrimaryColor}" IsHitTestVisible="False" Focusable="False">
                                <TextBlock Text="OLAP Ð¾Ð±ÑŠÐµÐºÑ‚" FontSize="12" Padding="5" Margin="15,0,0,0"/>
                              </Border>
                              <Border Grid.Column="1" BorderThickness="1" Padding="0" Background="{DynamicResource PrimaryColor}" IsHitTestVisible="False" Focusable="False">
                                <TextBlock Text="ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ" FontSize="12" Padding="5" Margin="15,0,0,0"/>
                              </Border>
                              <Border Grid.Column="2" BorderThickness="1" Padding="0" Background="{DynamicResource PrimaryColor}" IsHitTestVisible="False" Focusable="False">
                                <TextBlock Text="Ð¢Ð¸Ð¿" FontSize="12" Padding="5" Margin="15,0,0,0"/>
                              </Border>
                            </Grid>
                          </TreeDataTemplate>
                          
                          <TreeDataTemplate DataType="{x:Type local:ReporterNode}" ItemsSource="{Binding Objects}">
                            <StackPanel>
                              <TextBlock Text="{Binding ClassName}" FontWeight="Bold" FontSize="12" Padding="0"/>

                            </StackPanel>
                          </TreeDataTemplate>

                          <DataTemplate DataType="{x:Type local:ReporterObject}">
                            <Grid Margin="0,0,0,0">
                              <Grid.ColumnDefinitions>
                                <StaticResource ResourceKey="Column1"/>
                                <StaticResource ResourceKey="Column2"/>
                                <StaticResource ResourceKey="Column3"/>
                              </Grid.ColumnDefinitions>
                              <Border Grid.Column="0" BorderThickness="1" Padding="0" HorizontalAlignment="Stretch">
                                <TextBlock  Text="{Binding ObjectName}" Grid.Column="0" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                              </Border>
                              <Border Grid.Column="1" BorderThickness="1" Padding="0" HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding ObjectDescription}" Grid.Column="1" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="15,0,0,0"/>
                              </Border>
                              <Border Grid.Column="2" BorderThickness="1" Padding="0" HorizontalAlignment="Stretch">
                                <TextBlock Text="{Binding ObjectType}" Grid.Column="2" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0"/>
                              </Border>
                            </Grid>
                          </DataTemplate>
                          
                        </TreeView.DataTemplates>
                      </TreeView>
                    </Grid>

                  </StackPanel>
                </Grid>
              </Border>
            </DockPanel>
          </TabItem>
        </TabControl>
      </Grid>
      <!-- GridSplitter -->
      <GridSplitter Grid.Column="1" ResizeBehavior="PreviousAndNext"  Background="#F0F0F0"/>

      <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ: ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ¾Ð¹ -->
      <ScrollViewer Grid.Column="2" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Panel x:Name="VisiblePanel" Margin="0,0,5,0">
          <!-- Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… -->
        </Panel>
      </ScrollViewer>
    </Grid>
  </DockPanel>

</Window>
